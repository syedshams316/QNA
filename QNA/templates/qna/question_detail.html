{% extends 'qna/base.html' %}

{% block content %}

<P>Question : {{ question }}</P>

{% if request.user == question.author %}
<h2><a href="{% url 'edit_question' pk=question.pk %}">Edit Question</a> </h2>
<h3><a href="{% url 'delete_question' pk=question.pk %}">Delete Question</a> </h3>
{% endif %}

{% for answer in question.answers.all %}

<p>Answered by : <a href="/{{answer.author.username}}">{{ answer.author }}</a></p>
<P>{{ answer.text }}</P>
<p>ON : {{ answer.updated }}</p>
<P><a href="{% url 'answer_up_vote' pk=answer.pk %}"> UPVOTE </a>{{ answer.up_votes.all|length }}
    <a href="{% url 'answer_down_vote' pk=answer.pk %}"> DOWNVOTE </a>{{ answer.down_votes.all|length }}</P>

{% for comment in answer.comments.all %}

<p>Comment : {{ comment.text }}</p>
<p>Made by: {{ comment.author }} ON : {{ comment.updated }}</p>

<P><a href="{% url 'comment_up_vote' pk=comment.pk %}">Like Comment </a>{{ comment.up_votes.all|length }}
<a href="{% url 'comment_down_vote' pk=comment.pk %}">Dislike Comment </a>{{ comment.down_votes.all|length }}</P>

{% if request.user == comment.author %}
<p><a href="{% url 'edit_comment' pk=comment.pk %}">Edit Comment</a></p>
<p><a href="{% url 'delete_comment' pk=comment.pk %}">Delete Comment</a></p>
{% endif %}

{% endfor %}

{% if request.user.is_authenticated %}
<p><a href="{% url 'new_comment' pk=answer.pk %}">Comment</a></p>
{% endif %}

{% if request.user == answer.author %}
<p><a href="{% url 'edit_answer' pk=answer.pk %}">Edit Answer</a></P>
<p><a href="{% url 'delete_answer' pk=answer.pk %}">Delete Answer</a></p>
{% endif %}

{% endfor %}

{% if request.user.is_authenticated %}
<h2><a href="{% url 'new_answer' pk=question.pk %}">Give An Answer</a></h2>
{% endif %}

{% endblock %}
